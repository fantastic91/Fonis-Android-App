String.prototype.format=function(){a=this;for(k in arguments){a=a.replace("{"+k+"}",arguments[k])}return a};window.map={version:"Google mapa FONIS",init:function(){window._gaq=[["_setAccount",this.ga],["_trackPageview"],["_trackPageLoadTime"]];Modernizr.load({test:location.href.indexOf(this.url)>-1,yep:"//www.google-analytics.com/ga.js"});this.test("Backbone",function(){$("#forum").append('<h2>Forum</h2><ul id="forum_posts"></ul><h2>Subscribe</h2><form id="forum_subscribe" class="subscribe" action="#"><label for="email">E-mail:</label><input id="email" type="text" name="email" /><input type="submit" name="sub" value="Subscribe" /></form>');ForumCollection=Backbone.Collection.extend({url:"http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q={0}".format(encodeURIComponent(map.forum)),parse:function(a){return a.responseData.feed.entries}});ForumPost=Backbone.View.extend({tagName:"li",className:"group-item",template:_.template('<a href="<%=link%>"><%=title%></a></h3>'),render:function(){$(this.el).html(this.template(this.model.toJSON()));return this}});Forum=Backbone.View.extend({el:$("#forum"),initialize:function(){this.col=new ForumCollection;this.col.bind("reset",this.load,this);this.col.fetch()},add:function(a){var b=new ForumPost({model:a});$("#forum_posts").append(b.render().el)},load:function(){this.col.each(this.add);$("#forum_subscribe").attr("action",map.subscribe);$(this.el).show()}});var a=new Forum});this.test("prettyPrint",function(){prettyPrint()});$("#version").text(this.version)},redirect:function(a){alert("This page is deprecated. Please update your URL. Redirecting to new page.");window.location=a},col:[],tests:[],test:function(a,b){if(window[a]){b()}},add:function(a,b){if(b){this.col[a]=b}else{this.col.push(a)}return this},load:function(a){var b=this;if(a){b.col[a]()}else{$.each(b.col,function(a,c){try{c()}catch(d){alert(b.exception)}})}},timeStart:function(a,b){this.tests[a]={start:(new Date).getTime(),desc:b}},timeEnd:function(a){this.tests[a].elapsed=(new Date).getTime()},report:function(a){var b=1;for(var c in this.tests){var d=this.tests[c];$(a).append('<div class="benchmark rounded"><div class="benchmark-result lt">'+(d.elapsed-d.start)+' ms</div><div class="lt"><p class="benchmark-iteration">Benchmark case '+b+'</p><p class="benchmark-title">'+d.desc+"</p></div></div>");b++}}};map.init()